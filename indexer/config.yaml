name: monad-exchange-indexer
description: Indexer for Monad Perpetual Exchange events

field_selection:
  transaction_fields:
    - hash

contracts:
  - name: Exchange
    handler: src/EventHandlers.ts
    events:
      - event: MarginDeposited(address indexed trader, uint256 amount)
      - event: MarginWithdrawn(address indexed trader, uint256 amount)

      # Day 2: 订单事件
      - event: OrderPlaced(uint256 indexed id, address indexed trader, bool isBuy, uint256 price, uint256 amount)
      - event: OrderRemoved(uint256 indexed id)
      
      - event: TradeExecuted(uint256 indexed buyOrderId, uint256 indexed sellOrderId, uint256 price, uint256 amount, address buyer, address seller)
      - event: PositionUpdated(address indexed trader, int256 size, uint256 entryPrice)

      - event: FundingUpdated(int256 cumulativeFundingRate, uint256 timestamp)
      - event: FundingPaid(address indexed trader, int256 amount)

      - event: Liquidated(address indexed trader, address indexed liquidator, uint256 amount, uint256 reward)


networks:
  - id: 31337  # Anvil local network
    start_block: 0
    rpc_config:
      url: http://127.0.0.1:8545
    contracts:
      - name: Exchange
        address:
          - 0x52a4573bce8b38532f4bec84ea8aa1843ca3e0f0


# Day 5: TODO - 配置你的索引器

# 提示: 你需要配置:
# 1. 网络信息 (Monad Testnet/Anvil)
# 2. 合约地址
# 3. 需要监听的事件 (MarginDeposited, TradeExecuted, etc.)
